---
layout: default
---

{% assign curDateRaw = site.time | date: '%s' %}


{% capture curDate %} {{ curDateRaw | divided_by:86400 }} {% endcapture %}


<p>
  <button onclick="blendInTheEditLinks()">[e] edit</button>
</p>

<div class="xxx">

  <h1 class="xxx">Upcoming Events in {{ site.title }}</h1>

  <ul class="xxx">
    <!-- loop through all entries -->
    {% for event in site.posts reversed %}

      {% assign postStartDateRaw = event.date | date: '%s' %}
      {% capture postStartDate %} {{ postStartDateRaw | divided_by:86400 }} {% endcapture %}
      {% capture postStartDateMinusOne %} {{ postStartDate | plus:1 }} {% endcapture %}

        <!-- TODO -->
        <!-- only render event if it has an event url -->

        {% if postStartDateMinusOne >= curDate %}

        <li>

          <span class="xxx">{{ event.date | date: "%a, %b %-d" }}{% if event.end_date %} until {{ event.end_date | date: "%a, %b %-d" }}{% endif %}: </span>
          <strong class="xxx">
            <a href="{{ event.event_url }}">{{ event.title }}</a>
          </strong>

          <!-- <span>stamp: {{ postStartDateMinusOne }}</span> -->
          <span class="editLink"><a href="https://github.com/meetthepeople/{{ site.title }}/edit/gh-pages/{{ event.path }}">edit</a></span>

        </li>

      {% endif %}

    {% endfor %}
  </ul>

  <!-- <p class="rss-subscribe">subscribe <a href="{{ "/feed.xml" | prepend: site.baseurl }}">via RSS</a></p>
 -->
</div>

renderstamp: {{ site.time }}

<script type="text/javascript">

function blendInTheEditLinks() {
  for (var i = 0; i < editLinks.length; i++)
    editLinks[i].style.opacity = '1';

}

  var editLinks = document.getElementsByClassName("editLink");
  // http://stackoverflow.com/questions/5597060/detecting-arrow-key-  presses-in-javascript/17929007#17929007
  document.onkeydown = function(e) {
    switch (e.keyCode) {
        case 69:
          blendInTheEditLinks();
            break;
    }
};


</script>